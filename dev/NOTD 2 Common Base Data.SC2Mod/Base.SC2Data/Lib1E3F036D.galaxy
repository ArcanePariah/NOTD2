include "TriggerLibs/NativeLib"

include "Lib1E3F036D_h"

//--------------------------------------------------------------------------------------------------
// Library: Common Library
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void lib1E3F036D_InitLibraries () {
    libNtve_InitVariables();
}

// Variable Initialization
bool lib1E3F036D_InitVariables_completed = false;

void lib1E3F036D_InitVariables () {
    int init_i;

    if (lib1E3F036D_InitVariables_completed) {
        return;
    }

    lib1E3F036D_InitVariables_completed = true;

    lib1E3F036D_gv_teamUIDialog = c_invalidDialogId;
    lib1E3F036D_gv_teamUIFrame = c_invalidDialogControlId;
    for (init_i = 0; init_i <= lib1E3F036D_gv_numberofPlayers; init_i += 1) {
        lib1E3F036D_gv_playerStatus[init_i].lv_playerSidebar.lv_sideBarFrame = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerSidebar.lv_rankIcon = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerSidebar.lv_classIcon = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerPortrait.lv_portraitFrame = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerPortrait.lv_portraitImage = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerStatusFrame = c_invalidDialogControlId;
        lib1E3F036D_gv_playerStatus[init_i].lv_playerFrame = c_invalidDialogControlId;
    }
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_sideBarFrame = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_rankIcon = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_classIcon = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitFrame = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitImage = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerStatusFrame = c_invalidDialogControlId;
    lib1E3F036D_gv_topPlayerStatus.lv_playerFrame = c_invalidDialogControlId;
}

// Presets
// Functions
void lib1E3F036D_gf_SetPlayerFrame (int lp_player, unit lp_playerMarine, string lp_playerPortrait, string lp_classIcon) {
    // Implementation
    libNtve_gf_SetDialogItemUnit(lib1E3F036D_gv_topPlayerStatus.lv_playerStatusFrame, lp_playerMarine, PlayerGroupSingle(lp_player));
    libNtve_gf_SetDialogItemUnit(lib1E3F036D_gv_playerStatus[lp_player].lv_playerStatusFrame, lp_playerMarine, PlayerGroupAll());
    lib1E3F036D_gf_SetPlayerPortrait(lp_player, lp_playerPortrait);
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_classIcon, lp_classIcon, PlayerGroupSingle(lp_player));
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_playerStatus[lp_player].lv_playerSidebar.lv_classIcon, lp_classIcon, PlayerGroupAll());
}

void lib1E3F036D_gf_SetPlayerRank (int lp_player, string lp_playerRank) {
    // Implementation
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_rankIcon, lp_playerRank, PlayerGroupSingle(lp_player));
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_playerStatus[lp_player].lv_playerSidebar.lv_rankIcon, lp_playerRank, PlayerGroupAll());
}

void lib1E3F036D_gf_SetPlayerPortrait (int lp_player, string lp_playerPortrait) {
    // Implementation
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_playerStatus[lp_player].lv_playerPortrait.lv_portraitImage, lp_playerPortrait, PlayerGroupAll());
    libNtve_gf_SetDialogItemImage(lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitImage, lp_playerPortrait, PlayerGroupSingle(lp_player));
}

void lib1E3F036D_gf_ShowHideTeamUI (bool lp_visible) {
    // Implementation
    DialogControlSetVisible(lib1E3F036D_gv_teamUIFrame, PlayerGroupAll(), lp_visible);
}

void lib1E3F036D_gf_SetGameDifficultyforPlayerGroup (playergroup lp_players, int lp_difficulty) {
    // Implementation
    PlayerGroupLoopBegin(lp_players);
    for ( ; !PlayerGroupLoopDone() ; PlayerGroupLoopStep() ) {
        lib1E3F036D_gf_SetGameDifficulty(PlayerGroupLoopCurrent(), lp_difficulty);
    }
    PlayerGroupLoopEnd();
}

void lib1E3F036D_gf_SetGameDifficulty (int lp_player, int lp_gameDifficulty) {
    int auto638297DE_val;

    // Implementation
    auto638297DE_val = lp_gameDifficulty;
    if (auto638297DE_val == 0) {
        libNtve_gf_SetUpgradeLevelForPlayer(lp_player, "GameDifficulty", 0);
    }
    else if (auto638297DE_val == 1) {
        libNtve_gf_SetUpgradeLevelForPlayer(lp_player, "GameDifficulty", 1);
    }
    else if (auto638297DE_val == 2) {
        libNtve_gf_SetUpgradeLevelForPlayer(lp_player, "GameDifficulty", 2);
    }
    else {
        libNtve_gf_SetUpgradeLevelForPlayer(PlayerGroupLoopCurrent(), "GameDifficulty", 0);
    }
    PlayerSetDifficulty(lp_player, lp_gameDifficulty);
}

int lib1E3F036D_gf_GameDifficultyInteger (int lp_recruit, int lp_normal, int lp_nightmare) {
    int auto3902616F_val;

    // Implementation
    auto3902616F_val = lib1E3F036D_gf_GameType();
    if (auto3902616F_val == 0) {
        return lp_recruit;
    }
    else if (auto3902616F_val == 1) {
        return lp_normal;
    }
    else if (auto3902616F_val == 2) {
        return lp_nightmare;
    }
    else {
        return lp_recruit;
    }
}

fixed lib1E3F036D_gf_GameDifficultyReal (fixed lp_recruit, fixed lp_normal, fixed lp_nightmare) {
    int auto6D1DB235_val;

    // Implementation
    auto6D1DB235_val = lib1E3F036D_gf_GameType();
    if (auto6D1DB235_val == 0) {
        return lp_recruit;
    }
    else if (auto6D1DB235_val == 1) {
        return lp_normal;
    }
    else if (auto6D1DB235_val == 2) {
        return lp_nightmare;
    }
    else {
        return lp_recruit;
    }
}

int lib1E3F036D_gf_GameType () {
    // Implementation
    if ((PlayerDifficulty(1) == 0)) {
        return 0;
    }
    else {
        if ((PlayerDifficulty(1) == 1)) {
            return 1;
        }
        else {
            return 2;
        }
    }
}

string lib1E3F036D_gf_UnitTypeDifficulty (string lp_recruit, string lp_normal, string lp_nightmare) {
    int autoFFC98359_val;

    // Implementation
    autoFFC98359_val = lib1E3F036D_gf_GameType();
    if (autoFFC98359_val == 0) {
        return lp_recruit;
    }
    else if (autoFFC98359_val == 1) {
        return lp_normal;
    }
    else if (autoFFC98359_val == 2) {
        return lp_nightmare;
    }
    else {
        return lp_recruit;
    }
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: Construct Team UI
//--------------------------------------------------------------------------------------------------
bool lib1E3F036D_gt_ConstructTeamUI_Func (bool testConds, bool runActions) {
    int autoC3353684_ae;
    int autoC3353684_ai;

    // Variable Declarations
    int lv_loop;

    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    DialogControlHookupStandard(c_triggerControlTypePanel, "UIContainer/FullscreenUpperContainer/TeamUI");
    lib1E3F036D_gv_teamUIFrame = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_teamUIFrame, c_triggerControlTypePanel, "TopPlayer");
    lib1E3F036D_gv_topPlayerStatus.lv_playerFrame = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerFrame, c_triggerControlTypePanel, "PlayerInfoSideBar");
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_sideBarFrame = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_sideBarFrame, c_triggerControlTypeImage, "PlayerClassIcon");
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_classIcon = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_sideBarFrame, c_triggerControlTypeImage, "PlayerRank");
    lib1E3F036D_gv_topPlayerStatus.lv_playerSidebar.lv_rankIcon = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerFrame, c_triggerControlTypePanel, "PlayerPortrait");
    lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitFrame = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitFrame, c_triggerControlTypeImage, "PlayerPortrait");
    lib1E3F036D_gv_topPlayerStatus.lv_playerPortrait.lv_portraitImage = DialogControlLastCreated();
    DialogControlHookup(lib1E3F036D_gv_topPlayerStatus.lv_playerFrame, c_triggerControlTypeUnitStatus, "PlayerStatus");
    lib1E3F036D_gv_topPlayerStatus.lv_playerStatusFrame = DialogControlLastCreated();
    autoC3353684_ae = lib1E3F036D_gv_numberofPlayers;
    autoC3353684_ai = 1;
    lv_loop = lib1E3F036D_gv_indexBaseValue;
    for ( ; ( (autoC3353684_ai >= 0 && lv_loop <= autoC3353684_ae) || (autoC3353684_ai <= 0 && lv_loop >= autoC3353684_ae) ) ; lv_loop += autoC3353684_ai ) {
        DialogControlHookup(lib1E3F036D_gv_teamUIFrame, c_triggerControlTypePanel, libNtve_gf_ConvertStringToUILayoutFrameName(("Player" + IntToString(lv_loop))));
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerFrame = DialogControlLastCreated();
        if ((PlayerStatus(lv_loop) == c_playerStatusActive)) {
            DialogControlSetVisible(DialogControlLastCreated(), PlayerGroupSingle(lv_loop), false);
        }
        else {
            DialogControlSetVisible(DialogControlLastCreated(), PlayerGroupAll(), false);
        }
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerFrame, c_triggerControlTypePanel, "PlayerInfoSideBar");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerSidebar.lv_sideBarFrame = DialogControlLastCreated();
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerSidebar.lv_sideBarFrame, c_triggerControlTypeImage, "PlayerClassIcon");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerSidebar.lv_classIcon = DialogControlLastCreated();
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerSidebar.lv_sideBarFrame, c_triggerControlTypeImage, "PlayerRank");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerSidebar.lv_rankIcon = DialogControlLastCreated();
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerFrame, c_triggerControlTypePanel, "PlayerPortrait");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerPortrait.lv_portraitFrame = DialogControlLastCreated();
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerPortrait.lv_portraitFrame, c_triggerControlTypeImage, "PlayerPortrait");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerPortrait.lv_portraitImage = DialogControlLastCreated();
        DialogControlHookup(lib1E3F036D_gv_playerStatus[lv_loop].lv_playerFrame, c_triggerControlTypeUnitStatus, "PlayerStatus");
        lib1E3F036D_gv_playerStatus[lv_loop].lv_playerStatusFrame = DialogControlLastCreated();
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void lib1E3F036D_gt_ConstructTeamUI_Init () {
    lib1E3F036D_gt_ConstructTeamUI = TriggerCreate("lib1E3F036D_gt_ConstructTeamUI_Func");
    TriggerAddEventMapInit(lib1E3F036D_gt_ConstructTeamUI);
}

void lib1E3F036D_InitTriggers () {
    lib1E3F036D_gt_ConstructTeamUI_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool lib1E3F036D_InitLib_completed = false;

void lib1E3F036D_InitLib () {
    if (lib1E3F036D_InitLib_completed) {
        return;
    }

    lib1E3F036D_InitLib_completed = true;

    lib1E3F036D_InitLibraries();
    lib1E3F036D_InitVariables();
    lib1E3F036D_InitTriggers();
}

